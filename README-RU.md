### YggNS

DNS-прокси для топорной и распреденной NS-системы для сети Yggdrasil.

## Идея

На мой взгляд, в DNS всегда есть компромисс между распределением и централизацией с точки зрения именования доменов. Если доменное имя случайно генерируется из адреса узла в сети и неразрывно с ним связано, вы можете относительно легко распределить его по сети. Примерами являются сети TOR и I2P. Когда вы хотите красивое и короткое доменное имя, вы должны зарегистрировать его и связать его с некоторой идентичностью в иерархических системах, таких как DNS. Либо распространять статичные "адресные книги" каким-либо другим способом.

Для Yggdrasil я хочу попробовать некую гибридную систему. Старый добрый DNS, который распределен по сети Yggdrasil.

Каждый узел в сети Yggdrasil имеет IPv6-адрес, который связан с узлом криптографически и не должен меняться в сети, независимо от того, к каким узлам он подключен. Если этот адрес является статическим, мы можем сопоставить его со статическим доменным именем, которое функционально сопоставлено с этим IPv6-адресом.

Если адрес узла например такой `201:9d54:3c57:d6d2:e8d7:a8ce:841f:eb89`, то мы можем сопоставить ему уникальное доменное имя, например `02019d543c57d6d2e8d7a8ce841feb89.ygg.`. Если мы хотим разрешить доменное имя `02019d543c57d6d2e8d7a8ce841feb89.ygg.`, то мы можем взять из него IPv6-часть `02019d543c57d6d2e8d7a8ce841feb89` и преобразовать её в IPv6-адрес `201:9d54:3c57:d6d2:e8d7:a8ce:841f:eb89`, и далее отправить DNS-запрос на DNS-сервер на узле с этим адресом. Тогда зачем нам разрешать его, когда он уже сопоставлен? Мы можем разрешить имена, как например `example.02019d543c57d6d2e8d7a8ce841feb89.ygg.` и пойди за резолвом по адресу `201:9d54:3c57:d6d2:e8d7:a8ce:841f:eb89`, но DNS-сервер на этом узле может разрешить его на другой IPv6-адрес, скажем `202:12a9:e5:4474:d473:82be:16ac:9381`, и далее переходим к сервису этого доменного имени на другой узел. Один администратор может распределять службы между несколькими узлами, которыми он владеет.

### Как это опробовать

Вам понадобится python3 и установленная библиотека dnspython.

Далее просто запустите его. DNS-прокси стартует на адресе [::1]:53535 по умолчанию. Доменные имена, которые не в формате YggNS разрешаются обычным DNS. По умолчанию это 8.8.8.8.

Настройки внутри скрипта, в начале.

Возможно, Вам необходимо будет запустить скрипт из-под root, чтобы он мог прослушивать 53ий порт. Либо вы можете настроить переадресацию на этот DNS-прокси с помощью простых DNS-сервера таких как dnsmasq или unbound.

### Что опробовать

Тестовый сайт на http://02019d543c57d6d2e8d7a8ce841feb89.ygg
